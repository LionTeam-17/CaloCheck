<html layout:decorate="~{common/layout/defaultLayout.html}" xmlns:layout="">
<head>
  <title>장바구니</title>
  <meta name="_csrf" th:content="${_csrf.token}"/>
  <meta name="_csrf_header" th:content="${_csrf.headerName}"/>

  <!-- 라이브러리 CSS 불러오기 -->
  <link rel="stylesheet" href="/resource/library/library.css">

  <meta th:if="${error}" name="errorMsg" th:content="${exception}"/>

  <meta th:if="${@rq.isLogin()}" name="currentUsername" th:content="${@rq.getMember().getUsername()}"/>
  <meta th:if="${@rq.isLogout()}" name="currentUsername" th:content="no"/>

  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <style>
    #nutrientChart {
      width: 350px;
      height: 350px;
    }
  </style>
</head>

<body>
<main layout:fragment="Content">
  <div class="flex flex-col m-4">
    <div class="w-full">
      <div class="flex justify-center">
        <h1 class="font-bold text-black text-sm mb-4">
          <i class="fa-solid fa-list"></i>
          식사 후 영양정보
        </h1>
      </div>
      <div class="flex justify-center m-2 text-xs">
        챙겨먹는 것도 중요하지만 과하지 않은 것도 중요해요.
      </div>
      <div class="divider"></div>
      <div class="flex justify-between">
        <h1 class="font-bold text-black text-sm mb-4">
          <i class="fa-solid fa-list"></i>
          영양성분
        </h1>
        <div class="flex m-2">
          <div class="text-xs font-bold m-1">에너지(kcal)</div>
          <div class="text-xs text-black m-1"
               th:text="1000"></div>
        </div>
      </div>

      <div th:each="nutrient, loop: ${nutrientTotal}"
           class="flex justify-between">
        <div class="flex">
          <i class="fa-solid fa-list"></i>
          <div class="text-xs font-bold m-1"
               th:text="${nutrient.name} + '(' + ${nutrient.unit} + ')'"></div>
        </div>
        <div class="text-xs text-black m-1"
             th:text="${nutrient.value}"></div>
        <div class="divider"></div>
      </div>
    </div>

  </div>

  <script th:inline="javascript">
    // 원형 그래프를 그릴 데이터
    const data = {
      labels: [
        "데이터1",
        "데이터2",
        "데이터3",
        "데이터4",
        "데이터5",
        "데이터6",
        "데이터7",
        "데이터8",
        "데이터9",
        "데이터10",
        "데이터11",
        "데이터12",
        "데이터13",
        "데이터14"
      ],
      datasets: [
        {
          data: [
            10,
            20,
            30,
            40,
            50,
            60,
            70,
            70,
            70,
            70,
            70,
            0,
            0,
            0,
          ], // 각 데이터의 값
          backgroundColor: [
            "#FF6384",
            "#36A2EB",
            "#FFCE56",
            "#4BC0C0",
            "#FF8C00",
            "#9966FF",
            "#C0C0C0",
            "#FFD700",
            "#3CB371",
            "#FF4500",
            "#00BFFF",
            "#BA55D3",
            "#008080",
            "#F08080"], // 각 데이터의 배경색
          hoverBackgroundColor: [
            "#FF6384",
            "#36A2EB",
            "#FFCE56",
            "#4BC0C0",
            "#FF8C00",
            "#9966FF",
            "#C0C0C0",
            "#FFD700",
            "#3CB371",
            "#FF4500",
            "#00BFFF",
            "#BA55D3",
            "#008080",
            "#F08080"
          ] // 각 데이터의 호버 배경색
        }
      ]
    };

    // 원형 그래프의 옵션
    const options = {
      responsive: false,
      maintainAspectRatio: false
    };

    // 캔버스 요소 선택
    const ctx = document.getElementById("nutrientChart").getContext("2d");

    // 원형 그래프 생성
    new Chart(ctx, {
      type: "doughnut",
      data: data,
      options: options
    });
  </script>
</main>
</body>

</html>