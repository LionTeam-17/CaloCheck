<html layout:decorate="~{common/layout/defaultLayout.html}" xmlns:layout="">

<head>
    <title>
        회원가입
    </title>
</head>

<body>

<th:block layout:fragment="Content">

    <div class="flex-grow flex items-center justify-center" >

    <script>
        function joinFormSubmit(form) {

            form.username.value = form.username.value.trim();

            if (form.username.value.length == 0) {
                toastWarning('아이디를 입력해주세요.');
                form.username.focus();
                return;
            }

            if (form.username.value.length < 4 || form.username.value.length > 20) {
                toastWarning('아이디를 4글자 이상, 20글자 이내로 입력해주세요.');
                form.username.focus();
                return;
            }

            form.password.value = form.password.value.trim();

            if (form.password.value.length == 0) {
                form.password.focus();
                toastWarning('비밀번호를 입력해주세요.');
                return;
            }

            if (form.password.value.length < 4 || form.password.value.length > 20) {
                form.password.focus();
                toastWarning('비밀번호를 4글자 이상, 20글자 이내로 입력해주세요.');
                return;
            }

            form.email.value = form.email.value.trim();
            if (form.email.value.length == 0) {
                toastWarning('이메일을 입력해주세요.');
                form.email.focus();
                return;
            }

            // 이메일 유효성 검사
            var emailRegex = /^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$/;
            if (!emailRegex.test(form.email.value)) {
                toastWarning('유효한 이메일 형식이 아닙니다.');
                form.email.focus();
                return;
            }


            form.nickname.value = form.nickname.value.trim();
            if (form.nickname.value.length == 0) {
                toastWarning('닉네임을 입력해주세요.');
                form.nickname.focus();
                return;
            }

            if (form.nickname.value.length < 2 || form.nickname.value.length > 20) {
                toastWarning('닉네임을 2글자 이상, 20글자 이내로 입력해주세요.');
                form.nickname.focus();
                return;
            }

            var genderSelected = false;
            var genderRadios = form.querySelectorAll('input[name="gender"]');
            for (var i = 0; i < genderRadios.length; i++) {
                if (genderRadios[i].checked) {
                    genderSelected = true;
                    break;
                }
            }
            if (!genderSelected) {
                toastWarning('성별을 선택해주세요.');
                return;
            }

            form.submit(); // 폼 발송
        }
    </script>


    <div class="hero-content flex-col">

        <h2 class="text-4xl mt-5 mx-5 font-bold flex flex-col">
            회원가입
        </h2>

        <form th:action method="POST" class="p-10 flex flex-col gap-4" onsubmit="joinFormSubmit(this); return false;">
            <div>
                <input type="text" name="username" maxlength="20" size="40" placeholder="아이디" class="input input-bordered">
            </div>
            <div>
                <input type="password" name="password" maxlength="20" size="40" placeholder="비밀번호" class="input input-bordered">
            </div>
            <div>
                <input type="text" name="email" maxlength="30" size="40" placeholder="이메일" class="input input-bordered">
            </div>

            <div class="flex justify-center gap-3">
                <div>
                    <span>성별:</span>
                </div>
                <div>
                    <label>
                        <input type="radio" name="gender" value="M">
                        남성
                    </label>
                    <label>
                        <input type="radio" name="gender" value="W">
                        여성
                    </label>
                </div>
            </div>

            <div class="flex justify-between">
                <div class="flex flex-col gap-4">
                    <div>
                        <input type="text" name="nickname" maxlength="20" size="15" placeholder="닉네임" class="input input-bordered">
                    </div>
                    <div>
                        <input type="text" name="height" size="15" placeholder="키(선택)" class="input input-bordered">
                    </div>
                    <div>
                        <input type="text" name="weight" size="15" placeholder="몸무게(선택)" class="input input-bordered">
                    </div>
                </div>
                <div class="flex flex-col gap-4">
                    <div>
                        <input type="text" name="age" size="15" placeholder="나이(선택)" class="input input-bordered">
                    </div>
                    <div>
                        <input type="text" name="muscleMass" size="15" placeholder="골격근량(선택)" class="input input-bordered">
                    </div>
                    <div>
                        <input type="text" name="bodyFat" size="15" placeholder="체지방량(선택)" class="input input-bordered">
                    </div>
                </div>
            </div>

            <div class="flex flex-row mt-3 justify-end">
                <label class="cursor-pointer label">
                    <input name="agree" type="checkbox" class="checkbox checkbox-info"/>
                    <span class="label-text mx-3">이미지 수집 동의</span>
                </label>

                <label for="my_modal_6" class="btn btn" style="background:#112D4E">이미지 수집 안내</label>
            </div>
            <!-- Put this part before </body> tag -->
            <input type="checkbox" id="my_modal_6" class="modal-toggle"/>
            <div class="modal">
                <div class="modal-box">
                    <h3 class="font-bold text-lg">이미지 수집 동의 안내</h3>
                    <p class="py-4">유해하지 않은 음식 이미지에 한해 저희 사이트의 대표 음식 이미지가 될 수 있습니다.</p>
                    <p class="py-4">여러분이 제공해주시는 이미지가 저희 사이트에 큰 힘이 됩니다.</p>
                    <p class="py-4">뭐 약간... 이런 느낌</p>
                    <p class="py-4 text-red">단, 저작권에 위배되거나 유해한 사진을 업로드 하시는 경우 이용에 제약이 있을 수
                        있습니다.</p>
                    <div class="modal-action">
                        <label for="my_modal_6" class="btn">닫기</label>
                    </div>
                </div>
            </div>

            <div class="form-control">
                <input type="submit" value="회원가입" size="30" class="btn btn-accent">
            </div>

        </form>

    </div>
</div>
</th:block>
</body>
</html>
