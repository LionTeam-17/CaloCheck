<html layout:decorate="~{common/layout/defaultLayout.html}" xmlns="http://www.w3.org/1999/html">
<head>
    <meta charset="UTF-8">
    <title>영양소 명세 리스트</title>
</head>

<body>
<div layout:fragment="Content">

    <div>
        <div class="mt-10 ml-10 flex">
            <h3 class="text-gray-400 font-bold bolder-none my-2 mb-0.5">영양소 목록</h3>
        </div>
        <div class="flex flex-wrap justify-center items-center mt-3 ml-10 mr-10 py-3 bg-gray-300 rounded-lg h-auto">

            <input type="radio" name="nutritionType" value="carbohydrate"
                   class="radio radio ml-10 checked:bg-yellow-500"/>
            <label class="text-black ml-2 whitespace-nowrap">탄수화물</label>

            <input type="radio" name="nutritionType" value="protein"
                   class="radio radio ml-10 checked:bg-yellow-500"/>
            <label class="text-black ml-2 whitespace-nowrap">단백질</label>

            <input type="radio" name="nutritionType" value="fat"
                   class="radio radio ml-10 checked:bg-yellow-500"/>
            <label class="text-black ml-2 whitespace-nowrap">지방</label>

            <input type="radio" name="nutritionType" value="calcium"
                   class="radio radio ml-10 checked:bg-yellow-500"/>
            <label class="text-black ml-2 whitespace-nowrap">칼슘</label>

            <input type="radio" name="nutritionType" value="sodium"
                   class="radio radio ml-10 checked:bg-yellow-500"/>
            <label class="text-black ml-2 whitespace-nowrap">나트륨</label>

            <input type="radio" name="nutritionType" value="potassium"
                   class="radio radio ml-10 checked:bg-yellow-500"/>
            <label class="text-black ml-2 whitespace-nowrap">칼륨</label>

            <input type="radio" name="nutritionType" value="vitaminA"
                   class="radio radio ml-10 checked:bg-yellow-500"/>
            <label class="text-black ml-2 whitespace-nowrap">비타민A</label>

            <input type="radio" name="nutritionType" value="vitaminC"
                   class="radio radio ml-10 checked:bg-yellow-500"/>
            <label class="text-black ml-2 whitespace-nowrap mr-10">비타민C</label>

        </div>

        <div class="w-full h-full bg-gray-300 rounded-lg" th:if="${nutrition}">
            <h1 class="font-black" th:text="${nutrition.description}"></h1>
            <h1 class="font-black" th:text="${nutrition.nutritionName}"></h1>
        </div>
    </div>



    <script th:inline="javascript">
        // 선택된 라디오 버튼의 변경 이벤트를 감지
        const radioButtons = document.getElementsByName("nutritionType");
        radioButtons.forEach(function (radioButton) {
            radioButton.addEventListener("change", function () {
                // 선택된 값 가져오기
                const selectedValue = document.querySelector('input[name="nutritionType"]:checked').value;
                const csrfToken = /*[[${_csrf.token}]]*/ ''; // CSRF 토큰 값을 가져옵니다

                fetch(`http://localhost:8080/recommend/list`, {
                    method: "POST",
                    headers: {
                        "Content-Type": "application/json",
                        "X-CSRF-TOKEN": csrfToken // CSRF 토큰을 헤더에 추가
                    },
                    body: JSON.stringify(selectedValue)
                })
                    .then(
                        (resp) => {
                            return resp.json()
                        }
                    )
                    .catch(
                        (err) => {
                            console.log(err);
                        }
                    )
            });
        });
    </script>

</div>
</body>